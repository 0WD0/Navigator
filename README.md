# Navigator - 引用导向的知识管理系统

## 🎯 核心理念

我曾经是纯文本的忠实拥趸，想实现的大一统是在格式层面上统一为纯文本。

但是现实是信息很难用全部用纯文本来表示的，而且纯文本也不是在任何时候都能很好得发挥作用的（其他格式存在必然有它们的道理）

在我做笔记的时候，我会引用到各种各样的资源，或许是网页链接，或许是一个 pdf 里的一段摘要

所以，我就在想，有没有以引用为根基（也就是广义的批注）为基本元素的信息收集系统？
我们日常产生的动机它产生必然有其原因，这个因果关系何尝不是一种批注？

这个信息库在精炼之后就能得到专属于自己的知识库

要充分利用这样的知识库，要做的最重要的就是打通关系的创建和跳转通路

我想要处理的第一个信息媒介是 PDF （这也是这个项目需要做的任务）
我们可以设置各种视图(view)，比如预览视图(正常的 pdf 显示方式)、大纲视图、纯文本视图
还可以设置各种跳转方式，比如说预览视图下就可以按 layout detect 得到的区域按空间方位跳转，比如纯文本视图可以以句为单位跳转
跳转方式和视图不一定要绑定，这是后面要详细讨论的设计

最重要的是我需要能用键盘控制整个软件，vim-friendly 是我一直以来的设计理念

---

## 📖 文档指南

- **[📋 Electron 开发指南](docs/electron-development-guide.md)** - 完整的开发文档，适合第一次接触 Electron 的开发者
- **[🏗️ 技术架构设计](architecture.md)** - 系统架构和技术选型详解

## 🚀 快速开始

### 前置要求

- Node.js >= 18
- npm >= 9

### 安装依赖

```bash
npm install
```

### 启动开发环境

```bash
npm run dev
```

这会同时启动Vite开发服务器和Electron应用。

## 🎹 键盘快捷键

### 基础导航
- `j` - 下一页
- `k` - 上一页  
- `h` - 向左
- `l` - 向右
- `gg` - 第一页
- `G` - 最后一页

### 视图切换
- `1` - 预览视图
- `2` - 大纲视图 (开发中)
- `3` - 纯文本视图 (开发中)

### 命令模式
- `:` - 进入命令模式
- `:q` - 退出应用
- `:123` - 跳转到第123页
- `:view outline` - 切换视图 (开发中)

### 其他操作
- `Ctrl+O` - 打开PDF文件
- `?` - 显示/隐藏帮助
- `i` - 进入插入模式 (批注功能开发中)
- `Esc` - 返回普通模式

## 🏗️ 项目结构

```
navigator/
├── src/
│   ├── main/           # Electron主进程
│   │   ├── main.ts     # 主进程入口
│   │   └── preload.ts  # Preload脚本
│   ├── components/     # React组件
│   │   ├── PDFViewer.tsx    # PDF查看器
│   │   ├── StatusBar.tsx    # 状态栏
│   │   └── HelpPanel.tsx    # 帮助面板
│   ├── hooks/          # 自定义Hook
│   │   └── useKeyboard.ts   # vim-style键盘控制
│   ├── store/          # 状态管理
│   │   └── navigation.ts    # 导航状态
│   ├── types/          # TypeScript类型
│   └── App.tsx         # 主应用组件
├── docs/               # 文档目录
│   └── electron-development-guide.md  # 开发指南
├── architecture.md     # 技术架构
└── package.json        # 项目配置
```

## 💡 核心特性

### ✅ 已实现
- **vim-style键盘控制** - 完全键盘驱动的操作体验
- **PDF查看器** - 基于PDF.js的高质量PDF渲染
- **多模式支持** - Normal/Insert/Command模式切换
- **状态栏显示** - 实时显示当前模式和文档信息
- **快捷键帮助** - 内置快捷键参考面板
- **文件加载** - 支持通过对话框打开PDF文件
- **错误处理** - 完善的PDF加载错误处理和用户反馈

### 🚧 开发中
- **批注系统** - 广义批注和引用管理
- **多视图支持** - 大纲视图、纯文本视图等
- **智能跳转** - 基于内容结构的空间和语义导航
- **引用网络** - 文档间的关系构建和可视化
- **知识图谱** - 个人知识库的智能组织

### 🎯 技术栈

- **前端**: React 18 + TypeScript + Tailwind CSS
- **桌面**: Electron + Vite
- **PDF处理**: PDF.js
- **状态管理**: Zustand
- **构建工具**: Vite + TypeScript

## 🛠️ 开发脚本

```bash
# 完整开发环境 (推荐)
npm run dev

# 单独启动前端开发服务器
npm run dev:vite

# 编译并启动Electron
npm run dev:electron

# 构建生产版本
npm run build

# 打包桌面应用
npx electron-builder
```

## 🐛 调试和开发

### 渲染进程调试
- 右键 → 检查元素 或 F12 打开开发者工具
- 在React组件中使用 `console.log` 

### 主进程调试
- 主进程日志会显示在启动应用的终端中
- 使用 `console.log` 在 `src/main/main.ts` 中调试

### 常见问题
详见 [Electron开发指南](docs/electron-development-guide.md#常见问题解决)

## 🎨 设计原则

1. **键盘优先** - 所有操作都可以通过键盘完成
2. **vim友好** - 采用vim-style的操作逻辑
3. **引用导向** - 以引用和批注为核心构建知识网络
4. **多视图** - 支持不同的信息呈现和导航方式
5. **渐进增强** - 从基础功能开始逐步构建完整系统

## 🚀 未来规划

### 短期目标 (1-2个月)
- [ ] 完善PDF批注功能
- [ ] 实现大纲视图
- [ ] 添加纯文本视图
- [ ] 优化键盘导航体验

### 中期目标 (3-6个月)
- [ ] 引用系统设计和实现
- [ ] 多文档管理
- [ ] 搜索和索引功能
- [ ] 导出和分享功能

### 长期目标 (6个月+)
- [ ] 网页内容支持
- [ ] 图片和多媒体批注
- [ ] 协作功能
- [ ] 移动端支持
- [ ] AI辅助的内容理解和关联

## 🤝 贡献

这个项目目前处于早期开发阶段，欢迎任何形式的贡献：

- 🐛 报告bug
- 💡 提出新功能建议  
- 📝 改进文档
- 💻 提交代码

## 📄 许可证

MIT License - 详见 LICENSE 文件

---

*这个demo展示了基于引用导向知识管理理念的核心功能实现，为完整的引用导航器系统奠定了基础。*
