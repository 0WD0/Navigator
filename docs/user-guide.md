# Navigator 用户使用指南

欢迎使用 Navigator - 引用导向的知识管理系统！本指南将帮助你快速上手所有功能。

## 🚀 快速开始

### 启动应用

1. 确保已安装 Node.js 18+ 和 npm 9+
2. 在项目目录运行：
   ```bash
   npm install
   npm run dev
   ```

### 首次使用

应用启动后，你会看到两个主要模式：
- **文档视图**：传统的PDF查看器
- **布局视图**：高级的文档布局分析功能

## 📄 PDF文档查看

### 打开PDF文件

1. **方法一**：使用快捷键 `Ctrl+O`
2. **方法二**：点击"打开文件"按钮
3. **方法三**：在应用启动页面点击"选择 PDF 文件"

### vim式导航

Navigator 采用 vim-style 的键盘控制，让你完全脱离鼠标：

#### 基础导航
- `j` - 下一页
- `k` - 上一页
- `h` - 向左滚动
- `l` - 向右滚动
- `gg` - 跳转到第一页
- `G` - 跳转到最后一页

#### 命令模式
- `:` - 进入命令模式
- `:123` - 跳转到第123页
- `:q` - 退出应用

## 🎨 布局分析功能

### 切换到布局视图

1. 点击右上角的"布局视图"按钮
2. 或使用快捷键 `vl`

### 加载布局数据

布局分析需要三个JSON文件：

1. **使用示例数据**（推荐）：
   - 点击"选择文件"按钮
   - 依次选择 `examples/` 目录下的：
     - `sample-model.json` - 布局检测模型数据
     - `sample-middle.json` - 中间处理数据
     - `sample-content-list.json` - 结构化内容数据

2. **使用自己的数据**：
   - 准备符合格式的JSON文件
   - 按提示依次选择文件

### 布局视图功能

#### 可视化控制
- `vb` - 切换布局框显示/隐藏
- `vt` - 切换文本内容显示/隐藏
- `vo` - 切换文档大纲显示/隐藏

#### 页面导航
- `pj` - 下一页
- `pk` - 上一页
- 或使用页面选择下拉菜单

#### 布局信息

布局视图会显示：
- **页面信息**：尺寸、检测区域数量
- **布局框**：不同颜色代表不同类型
  - 蓝色：标题 (title)
  - 绿色：正文 (text)
  - 黄色：列表 (list)
  - 红色：表格 (table)
  - 紫色：图片 (figure)
  - 灰色：文本行 (text_line)
- **置信度**：每个区域的检测置信度
- **内容预览**：区域内的文本内容

## ⌨️ 完整快捷键参考

### 全局快捷键
- `Ctrl+O` - 打开PDF文件
- `Ctrl+L` - 加载布局分析文件
- `?` - 显示/隐藏快捷键帮助
- `Esc` - 返回普通模式

### 文档导航
- `j` / `k` - 上下页
- `h` / `l` - 左右滚动
- `gg` - 第一页
- `G` - 最后一页

### 视图控制
- `vl` - 切换布局视图
- `vo` - 切换文档大纲
- `vb` - 切换布局框显示
- `vt` - 切换文本内容显示

### 布局模式导航
- `pj` - 下一页
- `pk` - 上一页

### 命令模式
- `:` - 进入命令模式
- `:数字` - 跳转到指定页
- `:q` - 退出应用

### 模式切换
- `i` - 进入插入模式（批注功能开发中）
- `Esc` - 返回普通模式

## 🎯 使用技巧

### 1. 文档分析工作流

1. 首先在文档视图中浏览PDF了解内容
2. 切换到布局视图加载分析数据
3. 使用 `vb` 查看页面布局结构
4. 使用 `vt` 检查文本提取质量
5. 使用 `vo` 查看生成的文档大纲

### 2. 键盘导航最佳实践

- 习惯使用 `j`/`k` 进行页面导航，比方向键更快
- 善用 `gg` 和 `G` 快速跳转到文档首尾
- 使用 `:数字` 精确跳转到特定页面
- 记住 `?` 快捷键随时查看帮助

### 3. 布局分析技巧

- 先关闭布局框（`vb`）专注于文本内容
- 使用大纲视图（`vo`）了解文档结构
- 通过置信度评估布局检测质量
- 对比不同页面的布局类型分布

## 🔧 故障排除

### 常见问题

**Q: PDF文件无法加载**
A: 检查文件路径是否正确，确保PDF文件未损坏

**Q: 布局分析文件格式错误** 
A: 确保JSON文件格式正确，可以参考 `examples/` 目录下的示例文件

**Q: 快捷键不响应**
A: 确保焦点在应用窗口内，按 `Esc` 返回普通模式

**Q: 布局视图显示异常**
A: 尝试切换显示选项（`vb`/`vt`），或重新加载布局文件

### 调试模式

开发模式下可以：
- 打开开发者工具（F12）查看详细错误信息
- 查看控制台日志了解状态机运行情况
- 检查终端输出获取主进程日志

## 🎓 高级功能

### 自定义布局数据

如果你有自己的PDF分析工具，可以生成符合以下格式的JSON文件：

#### model.json 格式
```json
[
  {
    "page_info": {
      "page_no": 0,
      "width": 595,
      "height": 842
    },
    "layout_dets": [
      {
        "category_id": 1,
        "poly": [x1, y1, x2, y2],
        "score": 0.95,
        "text": "检测到的文本内容"
      }
    ]
  }
]
```

#### 类别ID对应关系
- 1: title (标题)
- 2: text (正文)
- 3: list (列表)
- 4: table (表格)
- 5: figure (图片)
- 6: text_line (文本行)

### 扩展功能规划

未来版本将支持：
- 多文档引用关系管理
- 智能批注和笔记系统
- 自动大纲生成和编辑
- 文档内容搜索和索引
- 导出和分享功能

## 💡 最佳实践

1. **键盘优先**：尽量使用键盘操作，提高效率
2. **模式思维**：理解 vim-style 的模式概念
3. **渐进学习**：从基础导航开始，逐步掌握高级功能
4. **数据准备**：规范化你的布局分析数据格式
5. **反馈意见**：遇到问题或有改进建议，欢迎反馈

---

希望这个指南能帮助你充分利用 Navigator 的强大功能！如有疑问，请查看项目文档或提交issue。 